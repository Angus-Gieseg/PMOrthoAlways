(()=>{var t={1989:(t,r,e)=>{var n=e(1789),o=e(401),i=e(7667),a=e(1327),s=e(1866);function p(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}p.prototype.clear=n,p.prototype.delete=o,p.prototype.get=i,p.prototype.has=a,p.prototype.set=s,t.exports=p},8407:(t,r,e)=>{var n=e(7040),o=e(4125),i=e(2117),a=e(7518),s=e(4705);function p(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}p.prototype.clear=n,p.prototype.delete=o,p.prototype.get=i,p.prototype.has=a,p.prototype.set=s,t.exports=p},7071:(t,r,e)=>{var n=e(852)(e(5639),"Map");t.exports=n},3369:(t,r,e)=>{var n=e(4785),o=e(1285),i=e(6e3),a=e(9916),s=e(5265);function p(t){var r=-1,e=null==t?0:t.length;for(this.clear();++r<e;){var n=t[r];this.set(n[0],n[1])}}p.prototype.clear=n,p.prototype.delete=o,p.prototype.get=i,p.prototype.has=a,p.prototype.set=s,t.exports=p},2705:(t,r,e)=>{var n=e(5639).Symbol;t.exports=n},9932:t=>{t.exports=function(t,r){for(var e=-1,n=null==t?0:t.length,o=Array(n);++e<n;)o[e]=r(t[e],e,t);return o}},8470:(t,r,e)=>{var n=e(7813);t.exports=function(t,r){for(var e=t.length;e--;)if(n(t[e][0],r))return e;return-1}},7786:(t,r,e)=>{var n=e(1811),o=e(327);t.exports=function(t,r){for(var e=0,i=(r=n(r,t)).length;null!=t&&e<i;)t=t[o(r[e++])];return e&&e==i?t:void 0}},4239:(t,r,e)=>{var n=e(2705),o=e(9607),i=e(2333),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},8458:(t,r,e)=>{var n=e(3560),o=e(5346),i=e(3218),a=e(346),s=/^\[object .+?Constructor\]$/,p=Function.prototype,h=Object.prototype,m=p.toString,l=h.hasOwnProperty,u=RegExp("^"+m.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?u:s).test(a(t))}},531:(t,r,e)=>{var n=e(2705),o=e(9932),i=e(1469),a=e(3448),s=n?n.prototype:void 0,p=s?s.toString:void 0;t.exports=function t(r){if("string"==typeof r)return r;if(i(r))return o(r,t)+"";if(a(r))return p?p.call(r):"";var e=r+"";return"0"==e&&1/r==-1/0?"-0":e}},1811:(t,r,e)=>{var n=e(1469),o=e(5403),i=e(5514),a=e(9833);t.exports=function(t,r){return n(t)?t:o(t,r)?[t]:i(a(t))}},4429:(t,r,e)=>{var n=e(5639)["__core-js_shared__"];t.exports=n},1957:(t,r,e)=>{var n="object"==typeof e.g&&e.g&&e.g.Object===Object&&e.g;t.exports=n},5050:(t,r,e)=>{var n=e(7019);t.exports=function(t,r){var e=t.__data__;return n(r)?e["string"==typeof r?"string":"hash"]:e.map}},852:(t,r,e)=>{var n=e(8458),o=e(7801);t.exports=function(t,r){var e=o(t,r);return n(e)?e:void 0}},9607:(t,r,e)=>{var n=e(2705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var r=i.call(t,s),e=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(r?t[s]=e:delete t[s]),o}},7801:t=>{t.exports=function(t,r){return null==t?void 0:t[r]}},1789:(t,r,e)=>{var n=e(4536);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:t=>{t.exports=function(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}},7667:(t,r,e)=>{var n=e(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var r=this.__data__;if(n){var e=r[t];return"__lodash_hash_undefined__"===e?void 0:e}return o.call(r,t)?r[t]:void 0}},1327:(t,r,e)=>{var n=e(4536),o=Object.prototype.hasOwnProperty;t.exports=function(t){var r=this.__data__;return n?void 0!==r[t]:o.call(r,t)}},1866:(t,r,e)=>{var n=e(4536);t.exports=function(t,r){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=n&&void 0===r?"__lodash_hash_undefined__":r,this}},5403:(t,r,e)=>{var n=e(1469),o=e(3448),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,r){if(n(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!o(t))||a.test(t)||!i.test(t)||null!=r&&t in Object(r)}},7019:t=>{t.exports=function(t){var r=typeof t;return"string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t}},5346:(t,r,e)=>{var n,o=e(4429),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,r,e)=>{var n=e(8470),o=Array.prototype.splice;t.exports=function(t){var r=this.__data__,e=n(r,t);return!(e<0||(e==r.length-1?r.pop():o.call(r,e,1),--this.size,0))}},2117:(t,r,e)=>{var n=e(8470);t.exports=function(t){var r=this.__data__,e=n(r,t);return e<0?void 0:r[e][1]}},7518:(t,r,e)=>{var n=e(8470);t.exports=function(t){return n(this.__data__,t)>-1}},4705:(t,r,e)=>{var n=e(8470);t.exports=function(t,r){var e=this.__data__,o=n(e,t);return o<0?(++this.size,e.push([t,r])):e[o][1]=r,this}},4785:(t,r,e)=>{var n=e(1989),o=e(8407),i=e(7071);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},1285:(t,r,e)=>{var n=e(5050);t.exports=function(t){var r=n(this,t).delete(t);return this.size-=r?1:0,r}},6e3:(t,r,e)=>{var n=e(5050);t.exports=function(t){return n(this,t).get(t)}},9916:(t,r,e)=>{var n=e(5050);t.exports=function(t){return n(this,t).has(t)}},5265:(t,r,e)=>{var n=e(5050);t.exports=function(t,r){var e=n(this,t),o=e.size;return e.set(t,r),this.size+=e.size==o?0:1,this}},4523:(t,r,e)=>{var n=e(8306);t.exports=function(t){var r=n(t,(function(t){return 500===e.size&&e.clear(),t})),e=r.cache;return r}},4536:(t,r,e)=>{var n=e(852)(Object,"create");t.exports=n},2333:t=>{var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},5639:(t,r,e)=>{var n=e(1957),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},5514:(t,r,e)=>{var n=e(4523),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n((function(t){var r=[];return 46===t.charCodeAt(0)&&r.push(""),t.replace(o,(function(t,e,n,o){r.push(n?o.replace(i,"$1"):e||t)})),r}));t.exports=a},327:(t,r,e)=>{var n=e(3448);t.exports=function(t){if("string"==typeof t||n(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},346:t=>{var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7813:t=>{t.exports=function(t,r){return t===r||t!=t&&r!=r}},7361:(t,r,e)=>{var n=e(7786);t.exports=function(t,r,e){var o=null==t?void 0:n(t,r);return void 0===o?e:o}},1469:t=>{var r=Array.isArray;t.exports=r},3560:(t,r,e)=>{var n=e(4239),o=e(3218);t.exports=function(t){if(!o(t))return!1;var r=n(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}},3218:t=>{t.exports=function(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},3448:(t,r,e)=>{var n=e(4239),o=e(7005);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},8306:(t,r,e)=>{var n=e(3369);function o(t,r){if("function"!=typeof t||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var e=function(){var n=arguments,o=r?r.apply(this,n):n[0],i=e.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return e.cache=i.set(o,a)||i,a};return e.cache=new(o.Cache||n),e}o.Cache=n,t.exports=o},9833:(t,r,e)=>{var n=e(531);t.exports=function(t){return null==t?"":n(t)}}},r={};function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n](i,i.exports,e),i.exports}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),(()=>{"use strict";const t={_enableKeyListener:function(){L.DomEvent.on(this.map.getContainer(),"keydown",this._keyDownFunction,this),L.DomEvent.on(this.map.getContainer(),"keyup",this._keyDownFunction,this),L.DomEvent.on(this.map.getContainer(),"mouseover",this._keyDownFunction,this),this.map.boxZoom.disable()},_disableKeyListener:function(){L.DomEvent.off(this.map.getContainer(),"keydown",this._keyDownFunction,this),L.DomEvent.off(this.map.getContainer(),"keyup",this._keyDownFunction,this),L.DomEvent.off(this.map.getContainer(),"mouseover",this._keyDownFunction,this),this.map.pm.pmOrtho._defaultBox&&this.map.boxZoom.enable()},_keyDownFunction:function(t){if("keydown"===t.type&&16===t.keyCode?this.map.pm.pmOrtho._shiftpressed=!1:"keyup"===t.type&&16===t.keyCode&&(this.map.pm.pmOrtho._shiftpressed=!0),this.map.pm.pmOrtho.options.customKey&&"shift"!==this.map.pm.pmOrtho.options.customKey){var r=this.map.pm.pmOrtho.options.customKey;["keydown","mouseover"].includes(t.type)&&(t.key==r||t.code==r||t.which==r||t.keyCode==r||"alt"==r&&t.altKey||("strg"==r||"ctrl"==r)&&t.ctrlKey)?this.map.pm.pmOrtho._shiftpressed=!1:this.map.pm.pmOrtho._shiftpressed=!0}else"keydown"!==t.type&&"keyup"!==t.type&&(this.map.pm.pmOrtho._shiftpressed=!t.shiftKey)},_getPointofAngle:function(t,r){for(var e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=this.map.latLngToContainerPoint(t),i=this.map.latLngToContainerPoint(r),a=this._getDistance(o,i),s=this._getAngle(o,i),p=this.options.snapAngle||45,h=[],m=0,l=0;l<360/p;)m=(l*p+n)%360,h.push(m),l++;n%90==0&&h.push(360),h.sort((function(t,r){return t-r})),e=h.reduce((function(t,r){return Math.abs(r-s)<Math.abs(t-s)?r:t}));var u=this._findDestinationPoint(o,a,e);return this.map.containerPointToLatLng(u)},_findDestinationPoint:function(t,r,e){return e=(e-90)%360,{x:Math.round(Math.cos(e*Math.PI/180)*r+t.x),y:Math.round(Math.sin(e*Math.PI/180)*r+t.y)}},_getDistance:function(t,r){var e=t.x-r.x,n=t.y-r.y;return Math.sqrt(e*e+n*n)},_getAngle:function(t,r){var e=r.x-t.x,n=r.y-t.y,o=-1*(180*Math.atan2(n,e)/Math.PI*-1-90);return(o<0?o+360:o)%360},_getRectanglePoint:function(t,r){var e,n=L.rectangle([t,r]),o=this.map.latLngToContainerPoint(t).x-this.map.latLngToContainerPoint(r).x,i=this.map.latLngToContainerPoint(t).y-this.map.latLngToContainerPoint(r).y,a=this.map.pm.pmOrtho._getDistance(this.map.latLngToContainerPoint(n.getBounds().getNorthEast()),this.map.latLngToContainerPoint(n.getBounds().getNorthWest())),s=this.map.pm.pmOrtho._getDistance(this.map.latLngToContainerPoint(n.getBounds().getNorthEast()),this.map.latLngToContainerPoint(n.getBounds().getSouthEast())),p=this.map.latLngToContainerPoint(t),h=this.map.latLngToContainerPoint(r);if(a>s){var m={x:h.x,y:p.y},l=i<0?180:0;e=this.map.pm.pmOrtho._findDestinationPoint(m,a,l)}else{var u={x:p.x,y:h.y},c=o<0?90:-90;e=this.map.pm.pmOrtho._findDestinationPoint(u,s,c)}return this.map.containerPointToLatLng(e)}};var r=e(7361),n=e.n(r),o=6371008.8,i={meters:o,metres:o,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:o/1852,inches:39.37*o,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function a(t,r,e){if(!m(e=e||{}))throw new Error("options is invalid");var n=e.bbox,o=e.id;if(void 0===t)throw new Error("geometry is required");if(r&&r.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!h(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=r||{},i.geometry=t,i}function s(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function p(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function h(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function m(t){return!!t&&t.constructor===Object}const l=function(t,r,e,n){if(!m(n=n||{}))throw new Error("options is invalid");var o=n.units,l=n.properties,u=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),c=p(u[0]),g=p(u[1]),f=p(e),_=function(t,r){if(null==t)throw new Error("distance is required");if(r&&"string"!=typeof r)throw new Error("units must be a string");var e=i[r||"kilometers"];if(!e)throw new Error(r+" units is invalid");return t/e}(r,o),d=Math.asin(Math.sin(g)*Math.cos(_)+Math.cos(g)*Math.sin(_)*Math.cos(f));return function(t,r,e){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(t[0])||!h(t[1]))throw new Error("coordinates must contain numbers");return a({type:"Point",coordinates:t},r,e)}([s(c+Math.atan2(Math.sin(f)*Math.sin(_)*Math.cos(g),Math.cos(_)-Math.sin(g)*Math.sin(d))),s(d)],l)},u=function(t,r,e){var n=(e=e||{}).steps||64,o=e.properties;if(!t)throw new Error("center is required");if(!r)throw new Error("radius is required");if("object"!=typeof e)throw new Error("options must be an object");if("number"!=typeof n)throw new Error("steps must be a number");n=n||64,o=o||t.properties||{};for(var i=[],s=0;s<n;s++)i.push(l(t,r,-360*s/n,e).geometry.coordinates);return i.push(i[0]),function(t,r,e){if(!t)throw new Error("coordinates is required");for(var n=0;n<t.length;n++){var o=t[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++){if(0===n&&0===i&&!h(o[0][0])||!h(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}}return a({type:"Polygon",coordinates:t},r,e)}([i],o)};var c=6371008.8,g={meters:c,metres:c,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:3440.069546436285,inches:250826616.45599997,yards:5825721.287490856,feet:20902260.511392,radians:1,degrees:57.22891354143274};function f(t,r,e){if(!v(e=e||{}))throw new Error("options is invalid");var n=e.bbox,o=e.id;if(void 0===t)throw new Error("geometry is required");if(r&&r.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!w(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=r||{},i.geometry=t,i}function _(t,r,e){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!w(t[0][1])||!w(t[0][1]))throw new Error("coordinates must contain numbers");return f({type:"LineString",coordinates:t},r,e)}function d(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function y(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function w(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function v(t){return!!t&&t.constructor===Object}const b=function(t,r,e,n){if(!v(n=n||{}))throw new Error("options is invalid");var o=n.units,i=n.properties,a=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),s=y(a[0]),p=y(a[1]),h=y(e),m=function(t,r){if(null==t)throw new Error("distance is required");if(r&&"string"!=typeof r)throw new Error("units must be a string");var e=g[r||"kilometers"];if(!e)throw new Error(r+" units is invalid");return t/e}(r,o),l=Math.asin(Math.sin(p)*Math.cos(m)+Math.cos(p)*Math.sin(m)*Math.cos(h));return function(t,r,e){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(t[0])||!w(t[1]))throw new Error("coordinates must contain numbers");return f({type:"Point",coordinates:t},r,e)}([d(s+Math.atan2(Math.sin(h)*Math.sin(m)*Math.cos(p),Math.cos(m)-Math.sin(p)*Math.sin(l))),d(l)],i)};function O(t){var r=t%360;return r<0&&(r+=360),r}function M(t,r,e){if(!x(e=e||{}))throw new Error("options is invalid");var n=e.bbox,o=e.id;if(void 0===t)throw new Error("geometry is required");if(r&&r.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!P(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var i={type:"Feature"};return o&&(i.id=o),n&&(i.bbox=n),i.properties=r||{},i.geometry=t,i}function P(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function x(t){return!!t&&t.constructor===Object}function E(t,r,e){if(null!==t)for(var n,o,i,a,s,p,h,m,l=0,u=0,c=t.type,g="FeatureCollection"===c,f="Feature"===c,_=g?t.features.length:1,d=0;d<_;d++){s=(m=!!(h=g?t.features[d].geometry:f?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var y=0;y<s;y++){var w=0,v=0;if(null!==(a=m?h.geometries[y]:h)){p=a.coordinates;var L=a.type;switch(l=!e||"Polygon"!==L&&"MultiPolygon"!==L?0:1,L){case null:break;case"Point":if(!1===r(p,u,d,w,v))return!1;u++,w++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(!1===r(p[n],u,d,w,v))return!1;u++,"MultiPoint"===L&&w++}"LineString"===L&&w++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(o=0;o<p[n].length-l;o++){if(!1===r(p[n][o],u,d,w,v))return!1;u++}"MultiLineString"===L&&w++,"Polygon"===L&&v++}"Polygon"===L&&w++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for("MultiPolygon"===L&&(v=0),o=0;o<p[n].length;o++){for(i=0;i<p[n][o].length-l;i++){if(!1===r(p[n][o][i],u,d,w,v))return!1;u++}v++}w++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===E(a.geometries[n],r,e))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(t){var r=t%360;return r<0&&(r+=360),r}const k=function(t,r,e,n,o){if(!x(o=o||{}))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(null==e)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if(!r)throw new Error("radius is required");if("object"!=typeof o)throw new Error("options must be an object");if(A(e)===A(n))return u(t,r,o);var i=function(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}(t),a=function(t,r,e,n,o){if(!v(o=o||{}))throw new Error("options is invalid");var i=o.steps,a=o.units;if(!t)throw new Error("center is required");if(!r)throw new Error("radius is required");if(null==e)throw new Error("bearing1 is required");if(null==n)throw new Error("bearing2 is required");if("object"!=typeof o)throw new Error("options must be an object");i=i||64;var s=O(e),p=O(n),h=t.properties;if(s===p)return _(u(t,r,o).geometry.coordinates[0],h);for(var m=s,l=s<p?p:p+360,c=m,g=[],f=0;c<l;)g.push(b(t,r,c,a).geometry.coordinates),c=m+360*++f/i;return c>l&&g.push(b(t,r,l,a).geometry.coordinates),_(g,h)}(t,r,e,n,o),s=[[i]];return E(a,(function(t){s[0].push(t)})),s[0].push(i),function(t,r,e){if(!t)throw new Error("coordinates is required");for(var n=0;n<t.length;n++){var o=t[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++){if(0===n&&0===i&&!P(o[0][0])||!P(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}}return M({type:"Polygon",coordinates:t},r,e)}(s)};function D(t){return t%360*Math.PI/180}function j(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function C(t,r,e){if(void 0===e&&(e={}),!0===e.final)return function(t,r){var e=C(r,t);return(e+180)%360}(t,r);var n=j(t),o=j(r),i=D(n[0]),a=D(o[0]),s=D(n[1]),p=D(o[1]),h=Math.sin(a-i)*Math.cos(p),m=Math.cos(s)*Math.sin(p)-Math.sin(s)*Math.cos(p)*Math.cos(a-i);return Math.atan2(h,m)%(2*Math.PI)*180/Math.PI}L.PMOrtho=L.Class.extend({includes:[t],options:{allowOrtho:!0,customKey:null,snapAngle:45,baseAngleOfLastSegment:!1,showAngleTooltip:!0,angleText:"Angle: "},cssadded:!1,initialize:function(t,r){this.map=t,L.setOptions(this,r),this.map&&this.map.pm&&(this.map.pm.pmOrtho=this),this._overwriteFunctions()},setOptions:function(t){L.setOptions(this,t)},_overwriteFunctions:function(){L.PM.PMOrthoFunctionAdded||(L.PM.PMOrthoFunctionAdded=!0,this._extendedEnable(),this._extendedDisable(),L.PM.Draw.Line.prototype._syncHintMarker=this._syncHintMarker(this),L.PM.Draw.Rectangle.prototype._finishShapeOrg=L.PM.Draw.Rectangle.prototype._finishShape,L.PM.Draw.Rectangle.prototype._finishShape=function(t){t.latlng=this._cornerPoint||t.latlng,this._hintMarker._snapped=!this._cornerPoint&&this._hintMarker._snapped,this._finishShapeOrg(t)},L.PM.Draw.prototype._addDrawnLayerPropOrg=L.PM.Draw.prototype._addDrawnLayerProp,L.PM.Draw.prototype._addDrawnLayerProp=function(t){this._addDrawnLayerPropOrg(t),t instanceof L.Rectangle?(t.pm._adjustRectangleForMarkerMoveOrg=t.pm._adjustRectangleForMarkerMove,t.pm._adjustRectangleForMarkerMove=function(r){if(this._map.pm.pmOrtho._shiftpressed&&this._map.pm.pmOrtho.options.allowOrtho){var e=this._map.pm.pmOrtho._getRectanglePoint(r._oppositeCornerLatLng,r.getLatLng());r.setLatLng(e)}t.pm._adjustRectangleForMarkerMoveOrg(r)}):t instanceof L.Polyline&&(t.pm._onMarkerDragOrg=t.pm._onMarkerDrag,t.pm._onMarkerDrag=function(r){var e=r.target,o=L.PM.Utils.findDeepMarkerIndex(this._markers,e),i=o.indexPath,a=o.index,s=o.parentPath;if(i){var p=i.length>1?n()(this._markers,s):this._markers,h=(a+(p.length-1))%p.length,m=(a+(p.length+1))%p.length,l=p[h].getLatLng(),u=p[m].getLatLng();if(this._map.pm.pmOrtho._shiftpressed&&this._map.pm.pmOrtho.options.allowOrtho){var c=0;if(this._map.pm.pmOrtho.options.baseAngleOfLastSegment&&p.length>1){var g=p[(a+(p.length-2))%p.length].getLatLng(),f=this._map.latLngToContainerPoint(l),_=this._map.latLngToContainerPoint(g);c=(c=this._map.pm.pmOrtho._getAngle(_,f)+90)>180?c-180:c}var d=this._map.pm.pmOrtho._getPointofAngle(l,e.getLatLng(),c);r.target._latlng=d,r.target.update()}if(p.length>1){this._map.pm.pmOrtho._angleLine||(this._map.pm.pmOrtho._angleLine=L.polyline([],{smoothFactor:0}).addTo(this._map));var y=this._map.latLngToContainerPoint(e.getLatLng()),w=this._map.latLngToContainerPoint(l),v=this._map.latLngToContainerPoint(u),b=this._map.pm.pmOrtho._getAngle(y,v);b=this._map.pm.pmOrtho._formatAngle(b-this._map.pm.pmOrtho._getAngle(y,w));var O=!0;if(this._layer instanceof L.Polygon?O=!0:this._layer instanceof L.Polyline&&(O=h<a+1&&0!==m),this._map.pm.pmOrtho.options.showAngleTooltip&&O){var M=this._map.pm.pmOrtho._addAngleLine(l,e.getLatLng(),u).getLatLngs();0===M.length?(this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null):this._map.pm.pmOrtho._angleLine.setLatLngs(M),this._map.pm.pmOrtho.tooltip?this._map.pm.pmOrtho.tooltip.setLatLng(e.getLatLng()).setContent(this._map.pm.pmOrtho.options.angleText+b):this._map.pm.pmOrtho.tooltip=L.tooltip({permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).setContent(this._map.pm.pmOrtho.options.angleText+b).setLatLng(e.getLatLng()).addTo(this._map)}else this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null,this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.remove(),this._map.pm.pmOrtho.tooltip=null)}t.pm._onMarkerDragOrg(r)}},t.pm._onMarkerDragEndOrg=t.pm._onMarkerDragEnd,t.pm._onMarkerDragEnd=function(r){this._map.pm.pmOrtho._angleLine&&(this._map.pm.pmOrtho._angleLine.removeFrom(this._map.pm.pmOrtho.map),this._map.pm.pmOrtho._angleLine=null),this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.removeFrom(this._map.pm.pmOrtho.map),this._map.pm.pmOrtho.tooltip=null),t.pm._onMarkerDragEndOrg(r)})}),this.map.on("pm:create",(function(t){var r=t.target;r._angleLine&&(r._angleLine.removeFrom(r),r._angleLine=null),r.tooltip&&(r.tooltip.removeFrom(r),r.tooltip=null)})),this.map.on("pm:globaleditmodetoggled",(function(t){t.enabled?t.map.pm.pmOrtho._enableShiftListener():t.map.pm.pmOrtho._disableShiftListener()}))},_extendedEnable:function(){L.PM.Draw.Line.prototype.enableOrg=L.PM.Draw.Line.prototype.enable,L.PM.Draw.Line.prototype.enable=function(t){this.enableOrg(t),this._map.pm.pmOrtho._enableShiftListener(),this._map.off("click",this._createVertex,this),this._map.on("click",this._map.pm.pmOrtho._createVertexNew,this)},L.PM.Draw.Rectangle.prototype.enableOrg=L.PM.Draw.Rectangle.prototype.enable,L.PM.Draw.Rectangle.prototype.enable=function(t){if(this.enableOrg(t),this._map.pm.pmOrtho._enableShiftListener(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var r=0;r<4;r+=1){var e=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._styleMarkers.push(e)}}}},_extendedDisable:function(){L.PM.Draw.Line.prototype.disableOrg=L.PM.Draw.Line.prototype.disable,L.PM.Draw.Line.prototype.disable=function(){this.disableOrg(),this._map.pm.pmOrtho._disableShiftListener(),this._map.off("click",this._map.pm.pmOrtho._createVertexNew,this),this._map.pm.pmOrtho._angleLine&&(this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null),this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.remove(),this._map.pm.pmOrtho.tooltip=null)},L.PM.Draw.Rectangle.prototype.disableOrg=L.PM.Draw.Rectangle.prototype.disable,L.PM.Draw.Rectangle.prototype.disable=function(){this.disableOrg(),this._map.pm.pmOrtho._disableShiftListener(),this._map.pm.pmOrtho._angleLine&&(this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null),this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.remove(),this._map.pm.pmOrtho.tooltip=null)},L.PM.Draw.Rectangle.include({_syncRectangleSize:this._syncRectangleSize})},_enableShiftListener:function(){this.map.pm.pmOrtho.options.allowOrtho&&(this.map.pm.pmOrtho._shiftpressed=!1,this.map.pm.pmOrtho._defaultBox=this.map.boxZoom.enabled(),this.map.pm.pmOrtho._enableKeyListener())},_disableShiftListener:function(){this.map.pm.pmOrtho.options.allowOrtho&&this.map.pm.pmOrtho._disableKeyListener()},_syncHintMarker:function(){return function(t){var r=this._layer.getLatLngs();if(r.length>0&&this._map.pm.pmOrtho._shiftpressed&&this._map.pm.pmOrtho.options.allowOrtho){var e=r[r.length-1],n=t.latlng,o=0;if(this._map.pm.pmOrtho.options.baseAngleOfLastSegment&&r.length>1){var i=r[r.length-2],a=this._map.latLngToContainerPoint(e),s=this._map.latLngToContainerPoint(i);o=this._map.pm.pmOrtho._getAngle(s,a)}var p=this._map.pm.pmOrtho._getPointofAngle(e,n,o);this._hintMarker.setLatLng(p),t.latlng=p}else this._hintMarker.setLatLng(t.latlng);if(this.options.snappable){var h=t;h.target=this._hintMarker,this._handleSnapping(h)}if(this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng()),r.length>1){this._map.pm.pmOrtho._angleLine||(this._map.pm.pmOrtho._angleLine=L.polyline([],{smoothFactor:0}).addTo(this._map),this._map.pm.pmOrtho._angleLine.setStyle(this._layer.options));var m=0,l=r[r.length-2],u=r[r.length-1],c=this._map.latLngToContainerPoint(u);if(this._map.pm.pmOrtho.options.baseAngleOfLastSegment&&r.length>1){var g=this._map.latLngToContainerPoint(l);m=this._map.pm.pmOrtho._getAngle(g,c)}var f=this._hintMarker.getLatLng(),_=this._map.latLngToContainerPoint(f),d=this._map.pm.pmOrtho._formatAngle(this._map.pm.pmOrtho._getAngle(_,c)-m);if(this._map.pm.pmOrtho.options.showAngleTooltip){var y=this._map.pm.pmOrtho._addAngleLine(l,u,f).getLatLngs();0===y.length?(this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null):this._map.pm.pmOrtho._angleLine.setLatLngs(y),this._map.pm.pmOrtho.tooltip?this._map.pm.pmOrtho.tooltip.setLatLng(u).setContent(this._map.pm.pmOrtho.options.angleText+d):this._map.pm.pmOrtho.tooltip=L.tooltip({permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).setContent(this._map.pm.pmOrtho.options.angleText+d).setLatLng(u).addTo(this._map)}else this._map.pm.pmOrtho._angleLine.remove(),this._map.pm.pmOrtho._angleLine=null,this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.remove(),this._map.pm.pmOrtho.tooltip=null)}}},_createVertexNew:function(t){var r=this._layer.getLatLngs();if(r.length>0&&this._map.pm.pmOrtho._shiftpressed&&this._map.pm.pmOrtho.options.allowOrtho){var e=r[r.length-1],n=t.latlng,o=0;if(this._map.pm.pmOrtho.options.baseAngleOfLastSegment&&r.length>1){var i=r[r.length-2],a=this._map.latLngToContainerPoint(e),s=this._map.latLngToContainerPoint(i);o=(o=this._map.pm.pmOrtho._getAngle(s,a)+90)>180?o-180:o}this._map.pm.pmOrtho._angleLine&&(this._map.pm.pmOrtho._angleLine.removeFrom(this._map),this._map.pm.pmOrtho._angleLine=null),this._map.pm.pmOrtho.tooltip&&(this._map.pm.pmOrtho.tooltip.removeFrom(this._map),this._map.pm.pmOrtho.tooltip=null);var p=this._map.pm.pmOrtho._getPointofAngle(e,n,o);t.latlng=p}this._createVertex(t)},_syncRectangleSize:function(){var t=this,r=this._startMarker.getLatLng(),e=this._hintMarker.getLatLng();this._layer.setBounds([r,e]),this._map.pm.pmOrtho.options.allowOrtho&&this._map.pm.pmOrtho._shiftpressed?(this._cornerPoint=this._map.pm.pmOrtho._getRectanglePoint(r,e),this._layer.setBounds([r,this._cornerPoint])):this._cornerPoint=null,this.options.cursorMarker&&this._styleMarkers&&this._findCorners().forEach((function(r,e){t._styleMarkers[e].setLatLng(r)}))},_addAngleLine:function(t,r,e){var n=C(this._toLngLat(r),this._toLngLat(t)),o=C(this._toLngLat(r),this._toLngLat(e));n=n<0?n+360:n,o=o<0?o+360:o;var i=t.distanceTo(r),a=e.distanceTo(r),s=i;if(a<s&&(s=a),i/a<.4?s=i*(1-i/a):a/i<.4?s=a*(1-a/i):s*=.4,0===s)return L.polyline([]);var p=k(this._toLngLat(r),s/1e3,n,o,{steps:360}),h=L.geoJson(p).getLayers()[0];return L.polyline(h.getLatLngs())},_toLngLat:function(t){return[t.lng,t.lat]},_formatAngle:function(t){var r=(t<0?t+360:t)%360;if(this._shiftpressed){var e=r%5;r=e<2.5&&e>1?parseInt(r)-parseInt(Math.ceil(e)):e>2.5?parseInt(r)+parseInt(Math.ceil(5-e)):parseInt(r)}return r.toFixed(2)}})})()})();